{"is_source_file": true, "format": "Python", "description": "This file provides database utility functions for connecting to a PostgreSQL database, executing queries, and managing transactions. It defines context managers for database connections and cursors, and functions for fetching single or multiple rows, executing data-altering statements, and handling returning queries.", "external_files": ["src.api.config"], "external_methods": ["get_settings"], "published": ["get_connection", "get_cursor", "fetch_one", "fetch_all", "execute", "execute_returning"], "classes": [], "methods": [{"name": "get_connection()", "description": "Provides a context-managed psycopg2 database connection, ensuring proper closure after use.", "scope": "", "scopeKind": ""}, {"name": "get_cursor(commit: bool = False)", "description": "Provides a context-managed database cursor with optional commit, managing transactions and rollback on error.", "scope": "", "scopeKind": ""}, {"name": "Optional[dict] fetch_one(query: str, params: Optional[Sequence[Any]] = None)", "description": "Executes a query and returns a single row as a dictionary, or None if no result.", "scope": "", "scopeKind": ""}, {"name": "list[dict] fetch_all(query: str, params: Optional[Sequence[Any]] = None)", "description": "Executes a query and returns all result rows as a list of dictionaries.", "scope": "", "scopeKind": ""}, {"name": "int execute(query: str, params: Optional[Sequence[Any]] = None)", "description": "Executes a data modification statement (INSERT/UPDATE/DELETE) and returns the number of affected rows.", "scope": "", "scopeKind": ""}, {"name": "Optional[dict] execute_returning(query: str, params: Optional[Sequence[Any]] = None)", "description": "Executes a statement with RETURNING clause and returns the first row as a dictionary, or None.", "scope": "", "scopeKind": ""}], "calls": ["get_settings()", "psycopg2.connect()", "conn.close()", "conn.cursor()", "cur.execute()", "cur.fetchone()", "cur.fetchall()", "conn.commit()", "conn.rollback()"], "search-terms": ["db.py", "psycopg2", "PostgreSQL", "database connection", "contextmanager", "fetch_one", "fetch_all", "execute", "execute_returning"], "state": 2, "file_id": 6, "knowledge_revision": 22, "git_revision": "4a3922b4ec70376af3e0edbcfbfe3bec49f37cb4", "revision_history": [{"13": ""}, {"22": "4a3922b4ec70376af3e0edbcfbfe3bec49f37cb4"}], "ctags": [{"_type": "tag", "name": "execute", "path": "/home/kavia/workspace/code-generation/notes-management-system-212621-212633/notes_backend/src/api/db.py", "pattern": "/^def execute(query: str, params: Optional[Sequence[Any]] = None) -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "(query: str, params: Optional[Sequence[Any]] = None)"}, {"_type": "tag", "name": "execute_returning", "path": "/home/kavia/workspace/code-generation/notes-management-system-212621-212633/notes_backend/src/api/db.py", "pattern": "/^def execute_returning(query: str, params: Optional[Sequence[Any]] = None) -> Optional[dict]:$/", "language": "Python", "typeref": "typename:Optional[dict]", "kind": "function", "signature": "(query: str, params: Optional[Sequence[Any]] = None)"}, {"_type": "tag", "name": "fetch_all", "path": "/home/kavia/workspace/code-generation/notes-management-system-212621-212633/notes_backend/src/api/db.py", "pattern": "/^def fetch_all(query: str, params: Optional[Sequence[Any]] = None) -> list[dict]:$/", "language": "Python", "typeref": "typename:list[dict]", "kind": "function", "signature": "(query: str, params: Optional[Sequence[Any]] = None)"}, {"_type": "tag", "name": "fetch_one", "path": "/home/kavia/workspace/code-generation/notes-management-system-212621-212633/notes_backend/src/api/db.py", "pattern": "/^def fetch_one(query: str, params: Optional[Sequence[Any]] = None) -> Optional[dict]:$/", "language": "Python", "typeref": "typename:Optional[dict]", "kind": "function", "signature": "(query: str, params: Optional[Sequence[Any]] = None)"}, {"_type": "tag", "name": "get_connection", "path": "/home/kavia/workspace/code-generation/notes-management-system-212621-212633/notes_backend/src/api/db.py", "pattern": "/^def get_connection():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_cursor", "path": "/home/kavia/workspace/code-generation/notes-management-system-212621-212633/notes_backend/src/api/db.py", "pattern": "/^def get_cursor(commit: bool = False):$/", "language": "Python", "kind": "function", "signature": "(commit: bool = False)"}], "hash": "e6efadda1b3ab18eab83b45f9bafa068", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/db.py"}